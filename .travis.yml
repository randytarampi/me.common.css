language: node_js
dist: trusty
node_js:
- '8'
before_install:
- uname -a
- lscpu
- npm install -g npm
- export NODE_ENV=prd;
- git config --global url."https://github.com/".insteadOf ssh://git@github.com/
- git config --global url."https://".insteadOf ssh://
script: npm run travis
before_deploy:
- mkdir -p ../dpl_cd_upload
- tar -zcf ../dpl_cd_upload/me.css.tar.gz -C ./ .
- git config --local user.name "Travis"
- export TRAVIS_AUTHOR=travis@randytarampi.ca
- export COMMIT_AUTHOR=`git --no-pager show -s --format='%ae' \`git rev-parse\``
- git config --local user.email $TRAVIS_AUTHOR
- npm version "0.0.0-`date -u +%s`" -m "[Travis] Release version %s";
deploy:
  provider: releases
  api_key:
    secure: eO67MVzEdXnW0NQz8zgZr94oqG+kVj7H9ePfP/1KFcb0EGDeqNf5QCAxEUf/HfxVgi4qyoM1vpe/dd7XMvirkkdketIbCIk9xh15CNc/IFnVGI3XLXpIjoQz4QG9MbIQ2PgANEyx9tMplFMpzteG2u9b8iFmh+RrN7aehl2ckOQbg0mGct4esYNX3bxSknP3asHJzmj62Z2an+vsFiuqdGqA/GrvSW9PVvvNEIolveVemaFTyv+PZG9BBk+37faA1szpIyiIaXfXO8fgIni/emadYqMrvi/lo6uoTstXVEnbHcPOzjL5ogcrcXuGjXxho2tBkErClr9IFuDlnvtBmkNxd1lHRIzD1T9pyT10PosxjzfOjWLjnNMMGR7UWNYzoiZmf6V2gS19hp57hDhAHgJTzaQ6J5IwjhOjJwxjy5wN4bYa2UTeSH0uyejzAw8zyrOdwoFkZ8wW1J2Np2IhPDL/Rn9oG8NSNMZ1Uk/Diil1jql1bd2bhIeghs7Oy5Ya7IgBGUC4tFUmXKLjJbc04J8xPuwiamPrhdkD6tr9aQpCOdimBHIBreaVebMtANbJkvuRYlCZtlBOwhw96czHSSBCj+D2IehsorgE5zJvLsUAFlkk9KLyFKopVHeaDm7juxAGI9++Au05L0OKeL44iwyDHvSBkyYLwIFa7J8bcYA=
  file: me.css.tar.gz
  skip_cleanup: true
  on:
    condition: "$TRAVIS_COMMIT_MESSAGE" != *"[Travis] Release version"*
    branch: master
    node: 8
after_deploy:
#- git push https://${GH_TOKEN}@github.com/${TRAVIS_REPO_SLUG} HEAD:master;
notifications:
  slack:
    secure: LKsIGJdCWaYOHADu1XT1M5DBXQG+HJ54D25+zC6FHuyfTNasy+DrY2uxJERqWojxpbUJZgYrtVISbFWneyXyqhdNwBhqu2ogsib3QOQMYsJqzO2ZOu0adr2CtShVaHAwwnhYhtsP6Cz5lCj1fKZ953cGjnN8/lGZxviRp6q2z4NQJxI9VBc9EaYjnBEoQo0H25RGaVMq9N9OCpCXiYbZLlhlIahZ9Liq/XdgEIhXofjVOzNrVe5BvM7tW2vKLDHjm7oD0uLkZSCEdMBiL2gV+YTm9P2rEbJFQcAocQFq9IkbodfPiWtxJ2QENWI0FovDWdP/fUZuXWvwmTA7beu0wjJnCTQ2umhOIfFafvOEAkIzWer7Ts8F77jtV+3p192QhGqLMPcGORwtXjXAL72hDs7dwuPuLdrqsNL/OtWZ/PNCtwu2knojAC7qCGSUfXOmoUGsJFFOuRQUzD0OY39tLwLYYWMKUk5sKrfdv7z/h1ye7UypCP31AOwczbxYVD+emtngmDK3n7tt085dFL2HSXzuC3oHF5I4evrD6Uq94A3grZLRpaY4PQ7ZRbW1pPiYDAYigkWETaKikWciES3xW21yMBrwZSPllQKDjokYPkqMTomcItOir4FR8SqiS57U1FOdTtWKPWmCmEOpDl3gBpr1NdZH/Sawe7r/A5WvJCU=
env:
  global:
    secure: yH9azmQvu89txR/fNsB6dMd7xrnHMMty54cdQJwSlT7BtFlibATFZFGsyAzKJrEN9CxVHoBA7tT79kAKg3Vkdm5Jgo1r5GsIyMIO1CcpCJ2lEqsweF1ubBxZqIIfVd2o0R3jJQranE3DS4x4+wkaAPaUIp7lN07svl4IKPutDIXzIrT0e1qBezJpBjuRatOMjE97PQ4C0FToYWHB/Z+D1H+rj1RdqsfeeUjluWzJhLWK8jK0jom+cBKwfcM+A9GCnZosfa+fzKHsquMpanTkHNqTOjblPA12G67/gATdiwFaNddtmAv46PMBVNk4YGiJ1Yzwdo0GfYnkqZsa6OMoREMN8Hf9HATyeeNiE60endP7OOruxvLAAQ9fQkqzHGe/SD1q+UAmdnU3e/NZYLKExHqaF8RfMr2r5Fgfhqh1Lk5FUppVFQ+FWQvgb4ayTR1bioiwymwOwsqsMXefTdPy2qS+MTxja43N9XQdxTbz3UFLD7ojULSoYB5Vjmo0bGCFiU5q3fAmgG/x0QrEDYlAkATF8J54Cx84N6KcF7iIxNyVXDgltHHNTxrNYXt9bEc5E30x4q18VLFC2bncVnaiEqZX/HoWZKoBnWeKDH+1CWDTa/IFKHANdziV4wP88xCoDGE5T4gCotDqB8XCFMqqkAnuwmqrR9hgzCG5Q5QMlrw=
