language: node_js
dist: trusty
node_js:
- '8'
before_install:
- uname -a
- lscpu
- npm install -g npm
- export NODE_ENV=prd;
- git config --global url."https://github.com/".insteadOf ssh://git@github.com/
- git config --global url."https://".insteadOf ssh://
script: npm run travis
before_deploy:
- mkdir -p ../dpl_cd_upload
- tar -zcf ../dpl_cd_upload/me.css.tar.gz -C ./ .
- git config --local user.name "Travis"
- export TRAVIS_AUTHOR=travis@randytarampi.ca
- export COMMIT_AUTHOR=`git --no-pager show -s --format='%ae' \`git rev-parse\``
- git config --local user.email $TRAVIS_AUTHOR
- if [[ "$TRAVIS_COMMIT_MESSAGE" != *"0.0.0-"* ]]; then
  npm version "0.0.0-`date -u +%s`";
  fi;
deploy:
  provider: releases
  api_key:
    secure: eAGFduAKPX+M8jjR3dik1fI+g0jPJsjWYcbAn1sylwnPIMuEnC/hh04wjO1UTcOdZFHAUFZIKKWX2ZF9M73oBbdU/XpUYRZ8LsKKOtQd+BVVvV+4xmZJNYvhM8CqDG1uhD64lGpCHeEJxs97rIR6zgjdgNeWz4kfY4MFOSHnUPZen4wcJYezwmFYBe2BQYoKxJP/z5sbh8ozo37EPzJodlXSRuEwhHE9Ml6jP9kArkNOYlds9jvtFTBZycQxtqIY+3E8DGQEmTMp9oXQG8Vx6ZmENzsgrol4dHyey9vqjB6mSDsoal/jS7G5aARvAJjuXN5cdixImZp5cslz4S5KDM6d9xkE9KUQdleHu5r3sN+o2AHrejfueevUCYl3zT/3r95jNqkrWg5cWhDzciMiTGMPUs+uWK4C4OkThxPGIBSTX9/FZQ8+FF2RxSdeHCvy17gTHjF+cxYz7c+SEyp2KWGrlwocQM6NlQTTXwpbWSl7pg0umgbkDtWgsxQsVp0Mvt4/R5Di1Jv+EK6+DXlXMSSYP4ck8rQnEJD4kasu7Sj+AsHEylfzjF9dTy6F6cm5kFMDHbiW5DKhgBFZzr1W1OcQACpCCW6Wo8WkHF9kUNOL62bv6vjGtoAMGcbzZTYsG01pGvWVpgpNK7xKOHkjDDZK5xZzy105O+frIUjy7fE=
  file: me.css.tar.gz
  skip_cleanup: true
  on:
    branch: master
    node: 8
after_deploy:
#- npm version preminor -m "[Travis] Prepare version %s";
- git push https://${GH_TOKEN}@github.com/${TRAVIS_REPO_SLUG} HEAD:master;
notifications:
  slack:
    secure: LKsIGJdCWaYOHADu1XT1M5DBXQG+HJ54D25+zC6FHuyfTNasy+DrY2uxJERqWojxpbUJZgYrtVISbFWneyXyqhdNwBhqu2ogsib3QOQMYsJqzO2ZOu0adr2CtShVaHAwwnhYhtsP6Cz5lCj1fKZ953cGjnN8/lGZxviRp6q2z4NQJxI9VBc9EaYjnBEoQo0H25RGaVMq9N9OCpCXiYbZLlhlIahZ9Liq/XdgEIhXofjVOzNrVe5BvM7tW2vKLDHjm7oD0uLkZSCEdMBiL2gV+YTm9P2rEbJFQcAocQFq9IkbodfPiWtxJ2QENWI0FovDWdP/fUZuXWvwmTA7beu0wjJnCTQ2umhOIfFafvOEAkIzWer7Ts8F77jtV+3p192QhGqLMPcGORwtXjXAL72hDs7dwuPuLdrqsNL/OtWZ/PNCtwu2knojAC7qCGSUfXOmoUGsJFFOuRQUzD0OY39tLwLYYWMKUk5sKrfdv7z/h1ye7UypCP31AOwczbxYVD+emtngmDK3n7tt085dFL2HSXzuC3oHF5I4evrD6Uq94A3grZLRpaY4PQ7ZRbW1pPiYDAYigkWETaKikWciES3xW21yMBrwZSPllQKDjokYPkqMTomcItOir4FR8SqiS57U1FOdTtWKPWmCmEOpDl3gBpr1NdZH/Sawe7r/A5WvJCU=
